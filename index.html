<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGBREACH</title>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            xbackground-color: #f0f0f0;
            background-color: black;
        }

        .container {
            font-family: 'Courier Prime', monospace;
            font-size: 120px;
            font-weight: bold;
            letter-spacing: 10px;
        }

        .sig {
            color: white;
            display: inline;
        }

        .breach {
            color: red;
            display: inline;
            animation: flicker 3s steps(50) 1;
        }

        .char {
            display: inline-block;
            transition: all 0.05s ease;
        }

        .char.inverted {
            color: white;
            background-color: #434343;
            padding: 0 2px;
            margin: 0 -2px;
        }

        @keyframes flicker {
            0% {
                opacity: 1;
            }
            10% {
                content: 'XXXXX';
            }
            20% {
                content: 'ZYQPM';
            }
            30% {
                content: 'ABCDE';
            }
            40% {
                content: 'KLMNO';
            }
            50% {
                content: 'VWXYZ';
            }
            60% {
                content: 'BCDFG';
            }
            70% {
                content: 'HPQRS';
            }
            80% {
                content: 'TUPQR';
            }
            90% {
                content: 'BREACH';
            }
            100% {
                content: 'BREACH';
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <span class="sig">SIG</span><span class="breach" id="breach-text"></span>
    </div>

    <script>
        const breachElement = document.getElementById('breach-text');
        const targetText = 'BREACH';
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

        // Create individual character states
        const characterStates = targetText.split('').map((targetChar, index) => ({
            targetChar: targetChar,
            currentChar: targetChar,
            startTime: 0,
            settled: false,
            settleTime: 6000 + (index * 700), // Each character settles at different times
            inverted: false,
            invertedUntil: 0, // Timestamp when inversion should end
            charSpan: null
        }));

        function getRandomChar() {
            return chars.charAt(Math.floor(Math.random() * chars.length));
        }

        function updateDisplay() {
            characterStates.forEach((state, index) => {
                if (!state.charSpan) {
                    state.charSpan = document.createElement('span');
                    state.charSpan.className = 'char';
                    breachElement.appendChild(state.charSpan);
                }
                state.charSpan.textContent = state.currentChar;

                if (state.inverted) {
                    state.charSpan.classList.add('inverted');
                } else {
                    state.charSpan.classList.remove('inverted');
                }
            });
        }

        function flicker() {
            const now = Date.now();
            let allSettled = true;

            characterStates.forEach(state => {
                if (!state.settled) {
                    allSettled = false;

                    // Calculate progress toward settlement
                    const elapsed = now - state.startTime;
                    const progress = Math.min(elapsed / state.settleTime, 1);

                    // Update inversion state - keep it true if still within invertedUntil time
                    state.inverted = now < state.invertedUntil;

                    // Flicker more frequently at the start, less frequently as time goes on
                    const flickerChance = Math.random() * (1 - progress);

                    if (flickerChance > 0.7) {
                        state.currentChar = getRandomChar();
                        // Occasionally invert for glitchy effect (6% chance, lasts 150-250ms)
                        if (Math.random() < 0.06) {
                            state.invertedUntil = now + 150 + Math.random() * 100;
                        }
                    } else {
                        // Gradually transition to correct character
                        if (Math.random() < progress * 0.8) {
                            state.currentChar = state.targetChar;
                        } else if (state.currentChar != state.targetChar) {
                        // Less frequent inversions while settling (4% chance, lasts 100-200ms)
                            if (Math.random() < 0.04) {
                                state.invertedUntil = now + 100 + Math.random() * 100;
                            }
                        }
                    }

                    // Check if settled
                    if (progress >= 1) {
                        state.currentChar = state.targetChar;
                        state.settled = true;
                        state.inverted = false;
                    }
                }
            });

            updateDisplay();

            if (!allSettled) {
                requestAnimationFrame(flicker);
            }
        }

        // Start flicker animation when page loads
        window.addEventListener('load', () => {
            const startTime = Date.now();
            characterStates.forEach(state => {
                state.startTime = startTime;
            });
            flicker();
        });
    </script>
</body>
</html>